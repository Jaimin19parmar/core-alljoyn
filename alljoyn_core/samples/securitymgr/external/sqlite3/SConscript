# # 
#    Copyright (c) 2016 Open Connectivity Foundation and AllJoyn Open
#    Source Project Contributors and others.
#    
#    All rights reserved. This program and the accompanying materials are
#    made available under the terms of the Apache License, Version 2.0
#    which accompanies this distribution, and is available at
#    http://www.apache.org/licenses/LICENSE-2.0

Import('env')

sqlite_env = env.Clone()

sqlite_env.Prepend(LIBS = ['dl'])

sqlite_dir = sqlite_env['SQLITE_DIR']

static_objs = sqlite_env.StaticObject(target = 'sqlite3', source = [ '%s/sqlite3.c' % sqlite_dir ])
libs = sqlite_env.StaticLibrary('sqlite3', static_objs)

if sqlite_env['LIBTYPE'] != 'static':
   shared_objs = sqlite_env.SharedObject(target = 'sqlite3', source = [ '%s/sqlite3.c' % sqlite_dir ])
   libs.append(sqlite_env.SharedLibrary('sqlite3', shared_objs))

Return ('libs')